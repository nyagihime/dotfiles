#!/bin/sh

if battery_info=$(/usr/bin/pmset -g ps | awk '{ if (NR == 2) print $3 " " $4 }' | sed -e "s/;//g" -e "s/%//") ; then

  battery_quantity=$(echo $battery_info | awk '{print $1}')
  battery_status=$(echo $battery_info | awk '{print $2}')

  if (( $battery_status = "charging" )); then
    # print_prefix="#[fg=green] ðŸ”Œ"
    print_prefix="#[fg=green] CHG"
  elif [ $battery_status != "discharging" ]; then
    print_prefix="#[fg=green] ï‰€"
  elif (( $battery_quantity < 75 )); then
    print_prefix="#[bg=red,fg=white] ï‰"
  elif (( $battery_quantity < 50 )); then
    print_prefix="#[bg=red,fg=white] ï‰‚"
  elif (( $battery_quantity < 16 )); then
    # print_prefix="#[bg=red,fg=white] ðŸ”‹"
    print_prefix="#[bg=red,fg=white] ï‰ƒ"
  else
    # print_prefix="#[fg=green] ðŸ”‹"
    print_prefix="#[fg=green] ï‰€"
  fi

  echo "#[bg=colour245]${print_prefix}  ${battery_quantity} #[default]"
fi
